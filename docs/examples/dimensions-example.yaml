---
dashboards:
  - id: dimensions-example-001
    name: '[Example] Multi-Dimensional Charts'
    description: Demonstrates complex dimension configurations and breakdowns
    panels:
      # Introduction
      - type: markdown
        title: Multi-Dimensional Visualizations
        grid: {x: 0, y: 0, w: 48, h: 5}
        content: |
          # Multi-Dimensional Chart Examples
          This dashboard demonstrates advanced dimension and breakdown configurations:
          - **Single dimension** - Basic time series
          - **Multiple dimensions** - Cross-tabulation
          - **Breakdowns** - Additional grouping layer
          - **Top N with sorting** - Size limits and sort orders
          - **Other bucket** - Handling remaining values
        font_size: 12

      # Example 1: Simple time dimension
      - type: charts
        title: Simple Time Series
        description: Single time dimension, no breakdown
        grid: {x: 0, y: 5, w: 24, h: 10}
        chart:
          type: line
          data_view: logs-*
          dimensions:
            - field: '@timestamp'
              type: date_histogram
              label: Time
          metrics:
            - aggregation: count
              label: Events

      # Example 2: Time + categorical dimension
      - type: charts
        title: Multi-Dimensional Line Chart
        description: Time dimension with log level breakdown
        grid: {x: 24, y: 5, w: 24, h: 10}
        chart:
          type: line
          data_view: logs-*
          dimensions:
            - field: '@timestamp'
              type: date_histogram
              label: Time
            - field: log.level
              type: values
              label: Log Level
              size: 5
              sort:
                by: Event Count
                direction: desc
              other_bucket: true
              missing_bucket: false
          metrics:
            - aggregation: count
              label: Event Count

      # Example 3: Top N with sorting
      - type: charts
        title: Top 10 Hosts by Traffic
        description: Sorted by metric value, showing top N
        grid: {x: 0, y: 15, w: 24, h: 12}
        chart:
          type: bar
          mode: stacked
          data_view: logs-*
          dimensions:
            - field: host.name
              type: values
              label: Host
              size: 10
              sort:
                by: Event Count
                direction: desc
              other_bucket: true
              missing_bucket: false
          metrics:
            - aggregation: count
              label: Event Count

      # Example 4: Multiple metrics
      - type: charts
        title: HTTP Response Analysis
        description: Multiple metrics on same chart
        grid: {x: 24, y: 15, w: 24, h: 12}
        filters:
          - exists: http.response.time
        chart:
          type: line
          data_view: logs-*
          dimensions:
            - field: '@timestamp'
              type: date_histogram
              label: Time
          metrics:
            - aggregation: count
              label: Request Count
            - aggregation: average
              field: http.response.time
              label: Avg Response Time (ms)
            - aggregation: max
              field: http.response.time
              label: Max Response Time (ms)

      # Example 5: Breakdown by additional field
      - type: charts
        title: Stacked Area with Breakdown
        description: Time dimension with service breakdown
        grid: {x: 0, y: 27, w: 24, h: 12}
        chart:
          type: area
          mode: stacked
          data_view: logs-*
          dimensions:
            - field: '@timestamp'
              type: date_histogram
              label: Time
          metrics:
            - aggregation: count
              label: Events
          breakdown:
            field: service.name
            type: values
            size: 8
            sort:
              by: Events
              direction: desc
            other_bucket: true

      # Example 6: Cross-tabulation (Bar chart with breakdown)
      - type: charts
        title: HTTP Methods by Status Code
        description: 'Cross-tabulation: method Ã— status_code'
        grid: {x: 24, y: 27, w: 24, h: 12}
        filters:
          - exists: http.request.method
          - exists: http.response.status_code
        chart:
          type: bar
          mode: stacked
          data_view: logs-*
          dimensions:
            - field: http.request.method
              type: values
              label: HTTP Method
              size: 10
              sort:
                by: Request Count
                direction: desc
          metrics:
            - aggregation: count
              label: Request Count
          breakdown:
            field: http.response.status_code
            type: values
            size: 10

      # Example 7: Percentile aggregations
      - type: charts
        title: Response Time Percentiles
        description: Multiple percentile metrics
        grid: {x: 0, y: 39, w: 24, h: 12}
        filters:
          - exists: http.response.time
          - field: http.response.time
            gte: '0'
        chart:
          type: line
          data_view: logs-*
          dimensions:
            - field: '@timestamp'
              type: date_histogram
              label: Time
          metrics:
            - aggregation: median
              field: http.response.time
              label: P50 Response Time
            - aggregation: percentile
              field: http.response.time
              percentile: 95
              label: P95 Response Time
            - aggregation: percentile
              field: http.response.time
              percentile: 99
              label: P99 Response Time

      # Example 8: Unique count with dimension
      - type: charts
        title: Unique Users per Service
        description: Unique count aggregation with breakdown
        grid: {x: 24, y: 39, w: 24, h: 12}
        filters:
          - exists: user.id
          - exists: service.name
        chart:
          type: bar
          mode: stacked
          data_view: logs-*
          dimensions:
            - field: service.name
              type: values
              label: Service
              size: 8
              sort:
                by: Unique Users
                direction: desc
          metrics:
            - aggregation: unique_count
              field: user.id
              label: Unique Users

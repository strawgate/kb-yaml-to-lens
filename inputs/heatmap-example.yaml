---
dashboards:
  - name: '[Heatmap] Agent Metrics Example'
    description: Example dashboard demonstrating heatmap visualizations with agent metrics
    panels:
      # Panel 1: ES|QL Heatmap - Agent Name vs Agent Version
      - title: Agent Events Heatmap (Name x Version)
        description: Event count heatmap showing distribution across agent names and versions
        grid: {x: 0, y: 0, w: 24, h: 12}
        esql:
          type: heatmap
          x_axis:
            field: agent.name
            id: dim_agent_name
          y_axis:
            field: agent.version
            id: dim_agent_version
          value:
            field: event_count
            id: metric_count
          query:
            - FROM metrics-*
            - STATS event_count = COUNT(*) BY agent.name, agent.version
            - LIMIT 100

      # Panel 2: ES|QL Heatmap - Agent Name vs Agent ID
      - title: Agent Events Heatmap (Name x ID)
        description: Event count heatmap showing distribution across agent names and IDs
        grid: {x: 24, y: 0, w: 24, h: 12}
        esql:
          type: heatmap
          x_axis:
            field: agent.name
            id: dim_agent_name
          y_axis:
            field: agent.id
            id: dim_agent_id
          value:
            field: event_count
            id: metric_count
          legend:
            is_visible: true
            position: right
          grid_config:
            is_cell_label_visible: false
            is_x_axis_label_visible: true
            is_y_axis_label_visible: true
            is_x_axis_title_visible: true
            is_y_axis_title_visible: true
          query:
            - FROM metrics-*
            - STATS event_count = COUNT(*) BY agent.name, agent.id
            - LIMIT 100

      # Panel 3: 1D Heatmap - Events by Agent Name only
      - title: Agent Events (1D Heatmap)
        description: Single-dimension heatmap showing event count by agent name
        grid: {x: 0, y: 12, w: 24, h: 8}
        esql:
          type: heatmap
          x_axis:
            field: agent.name
            id: dim_agent_name
          value:
            field: event_count
            id: metric_count
          legend:
            is_visible: true
            position: bottom
          query:
            - FROM metrics-*
            - STATS event_count = COUNT(*) BY agent.name
            - SORT event_count DESC
            - LIMIT 20

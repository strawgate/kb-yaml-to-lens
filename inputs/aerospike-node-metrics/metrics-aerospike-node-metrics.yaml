dashboards:
-
  id: 36bd5b4a-9c5b-4377-827d-f2e64d860f60
  name: "[Metrics Aerospike] Node Metrics"
  description: ""
  controls:
    - type: options
      id: 28b2de58-2df1-404b-869b-5c056630a213
      label: Aerospike Node
      width: medium
      data_view: metrics-*
      field: aerospike.node.name
      match_technique: contains
  panels:
    
  - type: links
    grid: { x: 0, y: 0, w: 48, h: 2 }
    layout: horizontal
    links:
      - label: Overview
        dashboard: 4d5b8a67-c5d9-478c-8128-e09cccc7f8ef
      - label: Node Metrics
        dashboard: 36bd5b4a-9c5b-4377-827d-f2e64d860f60
      - label: Namespace Metrics
        dashboard: c9484395-aa2b-43c4-84ad-12a7feb8c7d1

  - type: markdown
    grid: { x: 0, y: 2, w: 48, h: 2 }
    content: |
      This dashboard is intended to be used with a single Aerospike node. Filter to a specific node before using this dashboard.

  - type: charts
    grid: { x: 0, y: 4, w: 7, h: 5 }
    filters:
      - field: data_stream.dataset
        equals: aerospikereceiver.otel
    chart:
      type: metric
      data_view: metrics-*
      primary:
        aggregation: unique_count
        field: aerospike.node.name
        label: Selected Nodes

  # - type: lens
  #   grid: { x: 7, y: 4, w: 41, h: 5 }
  #   index_pattern: metrics-*
  #   filters:
  #     - field: data_stream.dataset
  #       equals: aerospikereceiver.otel
  #   chart:
  #     type: table
  #     columns:
  #       - field: aerospike.node.name
  #         type: terms
  #         label: Node Name
  #         size: 5
  #         sort:
  #           by: Last Gather Time # Assuming this maps to the column label
  #           direction: desc
  #         other_bucket: true
  #         missing_bucket: false
  #       - field: host.name
  #         type: last_value
  #         label: Monitored By
  #         sort_field: "@timestamp"
  #         filter: "host.name: *"
  #       - field: "@timestamp"
  #         type: last_value
  #         label: Last Gather Time
  #         sort_field: "@timestamp"
  #         filter: "@timestamp: *"

  - type: charts
    grid: { x: 0, y: 9, w: 10, h: 5 }
    filters:
      - field: data_stream.dataset
        equals: aerospikereceiver.otel
    chart:
      type: metric
      data_view: metrics-*
      primary:
        aggregation: unique_count
        field: aerospike.namespace
        label: Aerospike Namespaces

  - type: charts
    grid: { x: 10, y: 2, w: 38, h: 9 }
    filters:
      - field: data_stream.dataset
        equals: aerospikereceiver.otel
    chart:
      type: line
      data_view: metrics-*
      dimensions:
        - field: "@timestamp"
          type: date_histogram
          label: "@timestamp"
        - field: aerospike.node.name
          type: values
          label: Top 15 values of aerospike.node.name
          size: 15
          sort:
            by: "Free Memory" # Assuming alphabetical sort maps to _key
            direction: asc
          other_bucket: true
          missing_bucket: false
      metrics:
        - aggregation: min
          label: Free Memory
          field: aerospike.node.memory.free
          # format: {id: "percent", params: {decimals: 0}} # Not directly supported in YAML schema

  # - type: lens
  #   grid: { x: 0, y: 8, w: 10, h: 12 }
  #   index_pattern: metrics-*
  #   filters:
  #     - field: data_stream.dataset
  #       equals: aerospikereceiver.otel
  #   chart:
  #     type: table
  #     columns:
  #       - field: aerospike.node.name
  #         type: terms
  #         label: Node
  #         size: 100
  #         sort:
  #           by: Aerospike Namespaces # Assuming this maps to the column label
  #           direction: desc
  #         other_bucket: true
  #         missing_bucket: false
  #       - field: aerospike.namespace
  #         type: terms
  #         label: Namespace
  #         size: 100
  #         sort:
  #           by: Aerospike Namespaces # Assuming this maps to the column label
  #           direction: desc
  #         other_bucket: true
  #         missing_bucket: false
  #       - type: unique_count
  #         field: aerospike.namespace
  #         label: Aerospike Namespaces

  - type: charts
    grid: { x: 10, y: 9, w: 17, h: 14 }
    filters:
      - field: data_stream.dataset
        equals: aerospikereceiver.otel
    chart:
      type: line
      data_view: metrics-*
      dimensions:
        - field: "@timestamp"
          type: date_histogram
          label: "@timestamp"
        - field: aerospike.node.name
          type: values
          label: Top 15 values of aerospike.node.name
          size: 15
          sort:
            by: "Used Memory" # Assuming alphabetical sort maps to _key
            direction: desc
          other_bucket: true
          missing_bucket: false
      metrics:
        - aggregation: min
          label: Used Memory
          field: aerospike.node.memory.free
          # format: {id: "percent", params: {decimals: 0}} # Not directly supported in YAML schema
      # Reference lines are not directly supported in the YAML schema

  - type: charts
    grid: { x: 27, y: 9, w: 21, h: 14 }
    filters:
      - exists: aerospike.node.connection.open
      - field: data_stream.dataset
        equals: aerospikereceiver.otel
    chart:
      type: line
      data_view: metrics-*
      dimensions:
        - field: "@timestamp"
          type: date_histogram
          label: "@timestamp"
        - field: attributes.type
          type: values
          label: Top 15 values of attributes.type
          size: 15
          sort:
            by: Open Connections # Assuming this maps to the column label
            direction: desc
          other_bucket: true
          missing_bucket: false
      metrics:
        - aggregation: max
          field: aerospike.node.connection.open
          label: Open Connections
          # format: {id: "number", params: {decimals: 0}} # Not directly supported in YAML schema

dashboards:
  - name: "[Test] XY - Advanced Legend"
    description: "Test fixture for XY chart with advanced legend configuration"
    panels:
      # ES|QL variant
      - type: charts
        title: "Events by Response Code (Advanced Legend)"
        grid: { x: 0, y: 0, w: 24, h: 15 }
        chart:
          type: bar
          esql: "FROM logs-* | STATS count = COUNT() BY @timestamp, response.keyword"
          dimensions:
            - field: "@timestamp"
          metrics:
            - field: "count"
              label: "Count"
          breakdown_by:
            field: "response.keyword"
          stacked: normal
          legend:
            show: true
            position: top
            max_lines: 3
            truncate: true

      # Data View variant
      - type: charts
        title: "Events by Response Code (Advanced Legend - Data View)"
        grid: { x: 24, y: 0, w: 24, h: 15 }
        chart:
          type: bar
          data_view: "logs-*"
          dimensions:
            - field: "@timestamp"
              type: date_histogram
          metrics:
            - aggregation: count
              label: "Count"
          breakdown_by:
            field: "response.keyword"
            type: values
          stacked: normal
          legend:
            show: true
            position: top
            max_lines: 3
            truncate: true

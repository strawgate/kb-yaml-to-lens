# Test Fixture YAML Configurations

This directory contains YAML dashboard configurations that correspond to the Kibana fixtures generated by the fixture-generator.

## Purpose

These YAML files serve multiple purposes:

1. **Reference Examples** - Demonstrate how to create each chart type in YAML format
2. **Schema Validation** - Test that the YAML schema supports all Kibana chart types
3. **Integration Testing** - Validate that YAML compilation produces output compatible with Kibana

## Structure

Each YAML file corresponds to one of the 20 fixture generators in `fixture-generator/examples/`:

- **Metric charts**: `metric-basic.yaml`, `metric-grid.yaml`, `metric-with-breakdown.yaml`, `metric-with-trend.yaml`
- **Pie charts**: `pie-chart.yaml`, `pie-chart-donut.yaml`, `pie-chart-advanced-colors.yaml`
- **XY charts**: `xy-chart.yaml`, `xy-chart-stacked-bar.yaml`, `xy-chart-dual-axis.yaml`, `xy-chart-multi-layer.yaml`, `xy-chart-advanced-legend.yaml`, `xy-chart-custom-colors.yaml`
- **Other types**: `datatable-advanced.yaml`, `gauge.yaml`, `heatmap.yaml`, `treemap.yaml`, `waffle.yaml`, `tagcloud.yaml`, `tagcloud-advanced.yaml`

Each YAML file typically contains both ES|QL and Data View variants as separate panels within the same dashboard.

## Usage

### Compiling a Fixture

```bash
# Compile a single fixture
kb-yaml-to-lens compile inputs/test-fixtures/pie-chart.yaml

# Compile all fixtures
kb-yaml-to-lens compile inputs/test-fixtures/*.yaml
```

### Running Tests

```bash
# Run all fixture validation tests
make test ARGS="tests/test_fixture_validation.py"

# Run tests for specific fixture
make test ARGS="tests/test_fixture_validation.py -k metric-basic"
```

## Fixture Generator Mapping

| YAML File | Fixture Generator | JSON Fixtures Generated |
| --------- | ----------------- | ----------------------- |
| `metric-basic.yaml` | `metric-basic.js` | `metric-basic-esql.json`, `metric-basic-dataview.json` |
| `pie-chart.yaml` | `pie-chart.js` | `pie-chart-esql.json`, `pie-chart-dataview.json` |
| ... | ... | ... |

## Development Status

⚠️ **Work in Progress** - These YAML files are initial implementations and may need schema adjustments to match the exact output of the Kibana fixture generator. The primary goals are:

1. Ensure all chart types can be represented in YAML
2. Validate YAML schema coverage
3. Serve as documentation examples

## Contributing

When adding new fixture types:

1. Create the JavaScript fixture generator in `fixture-generator/examples/`
2. Run the generator to create JSON fixtures
3. Create corresponding YAML file in this directory
4. Ensure YAML compiles without errors
5. Compare compiled output structure with generated JSON fixture
